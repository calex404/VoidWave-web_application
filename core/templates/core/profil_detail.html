<!DOCTYPE html>
<html>
<head>
    <title>Profil: {{ profil.nickname }}</title>
</head>
<body>
    {% include 'core/navbar.html' %}
    
    <div style="max-width: 1000px; margin: 20px auto; display: flex; gap: 20px;">
        
        <div style="flex: 1; padding: 20px; border: 1px solid #ddd;">
            
            {% if request.user.is_authenticated and request.user.profil.id == profil.id %}
                <h1>M칪j profil</h1>
            {% else %}
                <h1>Profil: {{ profil.nickname }}</h1>
                
                {% if request.user.is_authenticated %}
                    <div style="margin-bottom: 20px;">
                        <a href="{% url 'send_friend_request' profil.id %}" 
                           style="background-color: #28a745; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; font-weight: bold;">
                           + Prida콘 do priate쬺v
                        </a>
                    </div>
                {% endif %}
                
            {% endif %}

            <p>Prez칳vka: <strong>{{ profil.nickname }}</strong></p>
            <hr>
            
            <h2>Inform치cie</h2>
            <p><strong>Rola:</strong> {{ profil.rola.nazov_role }}</p>
            <p><strong>칔rove켿:</strong> {{ profil.uroven }}</p>
            <p><strong>D치tum registr치cie:</strong> {{ profil.datum_registracie|date:"d.m.Y" }}</p>
            <hr>

            <h2>Bio:</h2>
            <p>{{ profil.bio|linebreaksbr }}</p>

            {% if request.user.is_authenticated and request.user.profil.id == profil.id %}
                <hr>
                <a href="{% url 'profil_edit' %}" style="display: block; text-align: right; color: blue;">
                    [ Upravi콘 Bio a Prez칳vku ]
                </a>
            {% endif %}
        </div>

        <div style="flex: 1; padding: 20px; border: 1px solid #ddd; background-color: #f9f9f9;">
            
            <a href="{% url 'profil_list' %}" style="display: block; text-align: center; background-color: #007bff; color: white; padding: 10px; border-radius: 5px; margin-bottom: 20px; text-decoration: none;">
                游댌 H쬬da콘 캞al코칤ch 쬿d칤
            </a>

            {% if request.user.profil == profil and ziadosti %}
                <h3>游닐 콯iadosti o priate쬽tvo</h3>
                <ul>
                    {% for ziadost in ziadosti %}
                        <li>
                            {{ ziadost.profil1.nickname }}
                            <a href="{% url 'accept_friend_request' ziadost.id %}" style="color: green;">[九]</a>
                            <a href="{% url 'reject_friend_request' ziadost.id %}" style="color: red;">[仇]</a>
                        </li>
                    {% endfor %}
                </ul>
                <hr>
            {% endif %}

            <h3>游뱋 Priatelia ({{ priatelia.count }})</h3>
            <ul>
                {% for p in priatelia %}
                    <li>
                        {% if p.profil1 == profil %}
                            <a href="{% url 'profil_detail' p.profil2.id %}">{{ p.profil2.nickname }}</a>
                        {% else %}
                            <a href="{% url 'profil_detail' p.profil1.id %}">{{ p.profil1.nickname }}</a>
                        {% endif %}
                    </li>
                {% empty %}
                    <li>Zatia 쬴adni priatelia.</li>
                {% endfor %}
            </ul>
            
            {% if request.user.profil == profil and oznamenia_list %}
                <hr>
                <h3>游닓 Ozn치menia</h3>
                {% for item in oznamenia_list %}
                    <div style="border-left: 4px solid blue; padding-left: 10px; margin-bottom: 10px;">
                        <strong>{{ item.oznamenie.nazov }}</strong><br>
                        <small>{{ item.datum_odoslania|date:"d.m.Y H:i" }}</small>
                        <p>{{ item.oznamenie.obsah }}</p>
                    </div>
                {% endfor %}
            {% endif %}
        </div>

    </div>
</body>
</html>