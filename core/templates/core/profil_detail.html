<!DOCTYPE html>
<html>
<head>
    <title>Profil: {{ profil.nickname }}</title>
</head>
<body>
    {% include 'core/navbar.html' %}
    
    <a href="{% url 'profil_list' %}" style="margin-left: 20px;">‚Üê Sp√§≈• na zoznam profilov</a>

    <div style="max-width: 1000px; margin: 20px auto; display: flex; gap: 20px;">
        
        <div style="flex: 1; padding: 20px; border: 1px solid #ddd;">
            
            {% if request.user.is_authenticated and request.user.profil.id == profil.id %}
                <h1>M√¥j profil</h1>
                <p>Prez√Ωvka: <strong>{{ profil.nickname }}</strong></p>
            {% else %}
                <h1>Profil: {{ profil.nickname }}</h1>
                <p>Prez√Ωvka: <strong>{{ profil.nickname }}</strong></p>
            {% endif %}

            <hr>
            
            <h2>Inform√°cie</h2>
            <p><strong>Rola:</strong> {{ profil.rola.nazov_role }}</p>
            <p><strong>√örove≈à:</strong> {{ profil.uroven }}</p>
            <p><strong>D√°tum registr√°cie:</strong> {{ profil.datum_registracie|date:"d.m.Y" }}</p>
            
            <hr>

            <h2>Bio:</h2>
            <p>{{ profil.bio|linebreaksbr }}</p>

            {% if request.user.is_authenticated and request.user.profil.id == profil.id %}
                <hr>
                <a href="{% url 'profil_edit' %}" style="display: block; text-align: right; color: blue; text-decoration: none; font-weight: bold; margin-top: 15px;">
                    [ Upravi≈• Bio a Prez√Ωvku ]
                </a>
            {% endif %}
            
        </div>

        <div style="flex: 1; padding: 20px; border: 1px solid #ddd; background-color: #f9f9f9;">
            
            <a href="{% url 'profil_list' %}" style="display: block; text-align: center; background-color: #007bff; color: white; padding: 10px; text-decoration: none; border-radius: 5px; margin-bottom: 20px;">
                üîç N√°js≈• / Prida≈• priateƒæov
            </a>

            <h3>ü§ù Priatelia ({{ priatelia.count }})</h3>
            <ul style="list-style-type: none; padding: 0;">
                {% for p in priatelia %}
                    <li>
                        {% if p.profil1 == profil %}
                            <a href="{% url 'profil_detail' p.profil2.id %}">{{ p.profil2.nickname }}</a>
                        {% else %}
                            <a href="{% url 'profil_detail' p.profil1.id %}">{{ p.profil1.nickname }}</a>
                        {% endif %}
                    </li>
                {% empty %}
                    <li>Zatiaƒæ ≈æiadni priatelia.</li>
                {% endfor %}
            </ul>
            
            <hr>

            {% if request.user.profil == profil and oznamenia_list %}
                <hr>
                <h3>üì¨ Moje Ozn√°menia ({{ oznamenia_list|length }})</h3>
                <div style="max-height: 250px; overflow-y: auto;">
                    {% for item in oznamenia_list %}
                        <div style="border: 1px solid #ccc; padding: 10px; margin-bottom: 5px; 
                                    border-left: 5px solid {% if item.datum_precitania %}#aaa{% else %}#007bff{% endif %};">
                            
                            <strong>{{ item.oznamenie.nazov }}</strong>
                            <span style="font-size: 0.8em; color: gray;">‚Äî {{ item.datum_odoslania|date:"d.m.Y H:i" }}</span>
                            <p style="margin-top: 5px;">
                                {{ item.oznamenie.obsah }}
                            </p>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

    </div>
</body>
</html>