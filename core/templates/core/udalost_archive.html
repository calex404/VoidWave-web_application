{% extends "base.html" %}

{% block title %}Arch√≠v Udalost√≠{% endblock %}

{% block content %}
    <div style="max-width: 900px; margin: 30px auto; padding: 20px; background: var(--color-surface); border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.5);">
        
        <div style="display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--color-border); padding-bottom: 15px; margin-bottom: 20px;">
            <h1 style="margin: 0; color: var(--color-text-main);">üóÑÔ∏è Arch√≠v Udalost√≠</h1>
            <a href="{% url 'udalost_list' %}" style="text-decoration: none; background-color: var(--color-gray); color: white; padding: 8px 16px; border-radius: 4px; font-weight: bold;">
                ‚Üê Sp√§≈• na Aktu√°lne
            </a>
        </div>

        <p style="color: var(--color-text-secondary); font-style: italic;">
            Tu n√°jde≈° hist√≥riu v≈°etk√Ωch z√°pasov a turnajov, ktor√© u≈æ skonƒçili.
        </p>

        {% for udalost in archiv %}
            <div style="border: 1px solid var(--color-border); padding: 20px; margin-bottom: 20px; border-radius: 8px; background-color: var(--color-surface);">
                
                <div style="display: flex; justify-content: space-between; align-items: start;">
                    <div>
                        <h3 style="margin: 0 0 10px 0; color: var(--color-accent);">
                            {{ udalost.nazov }} 
                            <span style="font-size: 0.7em; background-color: var(--color-border); padding: 3px 6px; border-radius: 4px; vertical-align: middle; color: var(--color-text-secondary);">Skonƒçen√©</span>
                        </h3>
                        
                        <div style="color: var(--color-text-secondary); line-height: 1.6;">
                            <strong>Hra:</strong> {{ udalost.hra.nazov }} <br>
                            <strong>D√°tum:</strong> {{ udalost.datum_konania|date:"d.m.Y H:i" }} <br>
                            <strong>Typ:</strong> {{ udalost.typ|capfirst }}
                        </div>
                    </div>

                    <div>
                        <a href="{% url 'hodnotenie_create' udalost.id %}" style="display: inline-block; text-decoration: none; background-color: var(--color-success); color: white; padding: 10px 15px; border-radius: 5px; font-weight: bold; text-align: center;">
                            Hodnoti≈• udalos≈•
                        </a>
                    </div>
                </div>

                <div style="margin-top: 15px; border-top: 1px solid var(--color-border); padding-top: 10px;">
                    <strong style="font-size: 0.9em; color: var(--color-text-secondary);">üìù Hodnotenia hr√°ƒçov:</strong>
                    
                    <ul style="list-style: none; padding: 0; margin: 10px 0 0 0;">
                        {% for recenzia in udalost.hodnotenie_set.all %}
                            <li style="background: var(--color-surface); border: 1px solid var(--color-border); padding: 8px; margin-bottom: 5px; border-radius: 4px; font-size: 0.9em;">
                                <strong style="color: var(--color-text-main);">{{ recenzia.profil.nickname }}</strong>: 
                                <span style="color: var(--color-accent); font-weight: bold;">{{ recenzia.hodnotenie }}/10</span>
                            </li>
                        {% empty %}
                            <li style="color: var(--color-text-secondary); font-size: 0.8em; font-style: italic;">
                                Zatiaƒæ ≈æiadne hodnotenia. Buƒè prv√Ω!
                            </li>
                        {% endfor %}
                    </ul>
                </div>

            </div>
        {% empty %}
            <div style="text-align: center; padding: 40px; color: var(--color-text-secondary); border: 2px dashed var(--color-border); border-radius: 8px;">
                <h3>üì≠ Arch√≠v je pr√°zdny</h3>
                <p>Spusti simul√°ciu 'minulost' na vygenerovanie d√°t.</p>
            </div>
        {% endfor %}

    </div>
    {% endblock content %}