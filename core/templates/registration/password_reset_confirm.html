{% extends "base.html" %}

{% block title %}Nové Heslo{% endblock %}

{% block background_loop %}{% endblock %}
{% block nav_bar %}{% endblock %}

{% block content %}
    <div class="auth-container">
        <div class="auth-card auth-card-large">
            
            <h2 class="auth-title">Nastavenie hesla</h2>

            <p class="auth-instruction-text">
                Zadaj svoje nové heslo dvakrát pre potvrdenie.
            </p>
            
            <form method="post">
                {% csrf_token %}
                
                {% if form.errors %}
                    <div class="form-error-box">
                        <p style="margin: 0; font-weight: bold;">⚠️ Heslá sa nezhodujú alebo sú slabé.</p>
                    </div>
                {% endif %}

                <div class="form-group">
                    <label>Nové heslo:</label>
                    {{ form.new_password1 }}
                </div>

                <div class="form-group">
                    <label>Potvrdenie nového hesla:</label>
                    {{ form.new_password2 }}
                </div>

                <div class="login-checkbox-group" style="margin-bottom: 25px;">
                    <input type="checkbox" id="show-pass-reset"> 
                    <label for="show-pass-reset">Zobraziť heslá</label>
                </div>

                <button type="submit" class="btn-auth">
                    ULOŽIŤ HESLO
                </button>
                
            </form>
        </div>
    </div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const checkbox = document.getElementById('show-pass-reset');
        
        // Django pre tento formulár generuje ID id_new_password1 a id_new_password2
        const pass1 = document.getElementById('id_new_password1');
        const pass2 = document.getElementById('id_new_password2');

        if (checkbox && pass1 && pass2) {
            checkbox.addEventListener('change', function() {
                const type = checkbox.checked ? 'text' : 'password';
                pass1.type = type;
                pass2.type = type;
            });
        }
    });
</script>
{% endblock %}